<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>寄せ書きページ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>🎉 或世イヌ 誕生日おめでとう！🎉</h1>

    <p>ここまでたどり着いたあなたから、或世イヌへお祝いの言葉を！</p>

    <div id="messages">
      <div class="message">💛 推しは永遠！お誕生日おめでとう！</div>
      <div class="message">🖤 これからもずっと応援してるよ！</div>
      <div class="message">💛 最後まで解いたあなたも最高！</div>
    </div>

    <!-- 寄せ書きフォーム（名前＋メッセージ） -->
    <form id="messageForm">
      <input type="text" id="userName" placeholder="名前（匿名OK）" required>
      <input type="text" id="newMessage" placeholder="メッセージを書く" required>
      <button type="submit">送信</button>
    </form>
  </div>

  <script>
    // 保存されているメッセージを表示
    window.addEventListener("DOMContentLoaded", () => {
      const savedMessages = JSON.parse(localStorage.getItem("userMessages")) || [];
      const messagesContainer = document.getElementById("messages");
      savedMessages.forEach(({ name, text }) => {
        const div = document.createElement("div");
        div.className = "message";
        div.textContent = `📝 ${name}：${text}`;
        messagesContainer.appendChild(div);
      });
    });

    // フォーム送信処理
    document.getElementById("messageForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const name = document.getElementById("userName").value.trim() || "匿名";
      const messageText = document.getElementById("newMessage").value.trim();
      if (!messageText) return;

      const newMessage = { name, text: messageText };

      // 表示に追加
      const messageDiv = document.createElement("div");
      messageDiv.className = "message";
      messageDiv.textContent = `📝 ${newMessage.name}：${newMessage.text}`;
      document.getElementById("messages").appendChild(messageDiv);

      // ローカルストレージに保存
      const saved = JSON.parse(localStorage.getItem("userMessages")) || [];
      saved.push(newMessage);
      localStorage.setItem("userMessages", JSON.stringify(saved));

      // フォームを空にする
      document.getElementById("userName").value = "";
      document.getElementById("newMessage").value = "";
    });
  </script>
</body>
</html>
